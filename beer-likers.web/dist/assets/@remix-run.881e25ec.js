/**
 * @remix-run/router v1.0.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function C(){return C=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},C.apply(this,arguments)}var U;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(U||(U={}));const Ne="popstate";function cr(e){e===void 0&&(e={});function t(n,a){let{pathname:d,search:s,hash:f}=n.location;return ce("",{pathname:d,search:s,hash:f},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:H(a)}return Dt(t,r,null,e)}function S(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Rt(){return Math.random().toString(36).substr(2,8)}function _e(e){return{usr:e.state,key:e.key}}function ce(e,t,r,n){return r===void 0&&(r=null),C({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?J(t):t,{state:r,key:t&&t.key||n||Rt()})}function H(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function J(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function fe(e){let t=typeof window<"u"&&typeof window.location<"u"&&window.location.origin!=="null"?window.location.origin:window.location.href,r=typeof e=="string"?e:H(e);return S(t,"No window.location.(origin|href) available to create URL for href: "+r),new URL(r,t)}function Dt(e,t,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:d=!1}=n,s=a.history,f=U.Pop,m=null;function u(){f=U.Pop,m&&m({action:f,location:i.location})}function h(g,R){f=U.Push;let D=ce(i.location,g,R);r&&r(D,g);let x=_e(D),T=i.createHref(D);try{s.pushState(x,"",T)}catch{a.location.assign(T)}d&&m&&m({action:f,location:i.location})}function w(g,R){f=U.Replace;let D=ce(i.location,g,R);r&&r(D,g);let x=_e(D),T=i.createHref(D);s.replaceState(x,"",T),d&&m&&m({action:f,location:i.location})}let i={get action(){return f},get location(){return e(a,s)},listen(g){if(m)throw new Error("A history only accepts one active listener");return a.addEventListener(Ne,u),m=g,()=>{a.removeEventListener(Ne,u),m=null}},createHref(g){return t(a,g)},encodeLocation(g){let R=fe(typeof g=="string"?g:H(g));return{pathname:R.pathname,search:R.search,hash:R.hash}},push:h,replace:w,go(g){return s.go(g)}};return i}var j;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(j||(j={}));function Pt(e){return e.index===!0}function Je(e,t,r){return t===void 0&&(t=[]),r===void 0&&(r=new Set),e.map((n,a)=>{let d=[...t,a],s=typeof n.id=="string"?n.id:d.join("-");return S(n.index!==!0||!n.children,"Cannot specify children on an index route"),S(!r.has(s),'Found a route id collision on id "'+s+`".  Route id's must be globally unique within Data Router usages`),r.add(s),Pt(n)?C({},n,{id:s}):C({},n,{id:s,children:n.children?Je(n.children,d,r):void 0})})}function ge(e,t,r){r===void 0&&(r="/");let n=typeof t=="string"?J(t):t,a=It(n.pathname||"/",r);if(a==null)return null;let d=Qe(e);Et(d);let s=null;for(let f=0;s==null&&f<d.length;++f)s=jt(d[f],Nt(a));return s}function Qe(e,t,r,n){return t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n=""),e.forEach((a,d)=>{let s={relativePath:a.path||"",caseSensitive:a.caseSensitive===!0,childrenIndex:d,route:a};s.relativePath.startsWith("/")&&(S(s.relativePath.startsWith(n),'Absolute route path "'+s.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),s.relativePath=s.relativePath.slice(n.length));let f=se([n,s.relativePath]),m=r.concat(s);a.children&&a.children.length>0&&(S(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),Qe(a.children,t,m,f)),!(a.path==null&&!a.index)&&t.push({path:f,score:Tt(f,a.index),routesMeta:m})}),t}function Et(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:Ut(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const Mt=/^:\w+$/,St=3,At=2,xt=1,Lt=10,Ct=-2,Ie=e=>e==="*";function Tt(e,t){let r=e.split("/"),n=r.length;return r.some(Ie)&&(n+=Ct),t&&(n+=At),r.filter(a=>!Ie(a)).reduce((a,d)=>a+(Mt.test(d)?St:d===""?xt:Lt),n)}function Ut(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function jt(e,t){let{routesMeta:r}=e,n={},a="/",d=[];for(let s=0;s<r.length;++s){let f=r[s],m=s===r.length-1,u=a==="/"?t:t.slice(a.length)||"/",h=Ft({path:f.relativePath,caseSensitive:f.caseSensitive,end:m},u);if(!h)return null;Object.assign(n,h.params);let w=f.route;d.push({params:n,pathname:se([a,h.pathname]),pathnameBase:Ht(se([a,h.pathnameBase])),route:w}),h.pathnameBase!=="/"&&(a=se([a,h.pathnameBase]))}return d}function Ft(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=Ot(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let d=a[0],s=d.replace(/(.)\/+$/,"$1"),f=a.slice(1);return{params:n.reduce((u,h,w)=>{if(h==="*"){let i=f[w]||"";s=d.slice(0,d.length-i.length).replace(/(.)\/+$/,"$1")}return u[h]=_t(f[w]||"",h),u},{}),pathname:d,pathnameBase:s,pattern:e}}function Ot(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),Se(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(s,f)=>(n.push(f),"([^\\/]+)"));return e.endsWith("*")?(n.push("*"),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function Nt(e){try{return decodeURI(e)}catch(t){return Se(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function _t(e,t){try{return decodeURIComponent(e)}catch(r){return Se(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+r+").")),e}}function It(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function Se(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Bt(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?J(e):e;return{pathname:r?r.startsWith("/")?r:$t(r,t):t,search:Kt(n),hash:zt(a)}}function $t(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function Pe(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Xe(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Wt(e,t,r,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=J(e):(a=C({},e),S(!a.pathname||!a.pathname.includes("?"),Pe("?","pathname","search",a)),S(!a.pathname||!a.pathname.includes("#"),Pe("#","pathname","hash",a)),S(!a.search||!a.search.includes("#"),Pe("#","search","hash",a)));let d=e===""||a.pathname==="",s=d?"/":a.pathname,f;if(n||s==null)f=r;else{let w=t.length-1;if(s.startsWith("..")){let i=s.split("/");for(;i[0]==="..";)i.shift(),w-=1;a.pathname=i.join("/")}f=w>=0?t[w]:"/"}let m=Bt(a,f),u=s&&s!=="/"&&s.endsWith("/"),h=(d||s===".")&&r.endsWith("/");return!m.pathname.endsWith("/")&&(u||h)&&(m.pathname+="/"),m}const se=e=>e.join("/").replace(/\/\/+/g,"/"),Ht=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Kt=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,zt=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;class Be extends Error{}class Vt{constructor(t){this.pendingKeys=new Set,this.subscriber=void 0,S(t&&typeof t=="object"&&!Array.isArray(t),"defer() only accepts plain objects");let r;this.abortPromise=new Promise((a,d)=>r=d),this.controller=new AbortController;let n=()=>r(new Be("Deferred data aborted"));this.unlistenAbortSignal=()=>this.controller.signal.removeEventListener("abort",n),this.controller.signal.addEventListener("abort",n),this.data=Object.entries(t).reduce((a,d)=>{let[s,f]=d;return Object.assign(a,{[s]:this.trackPromise(s,f)})},{})}trackPromise(t,r){if(!(r instanceof Promise))return r;this.pendingKeys.add(t);let n=Promise.race([r,this.abortPromise]).then(a=>this.onSettle(n,t,null,a),a=>this.onSettle(n,t,a));return n.catch(()=>{}),Object.defineProperty(n,"_tracked",{get:()=>!0}),n}onSettle(t,r,n,a){if(this.controller.signal.aborted&&n instanceof Be)return this.unlistenAbortSignal(),Object.defineProperty(t,"_error",{get:()=>n}),Promise.reject(n);this.pendingKeys.delete(r),this.done&&this.unlistenAbortSignal();const d=this.subscriber;return n?(Object.defineProperty(t,"_error",{get:()=>n}),d&&d(!1),Promise.reject(n)):(Object.defineProperty(t,"_data",{get:()=>a}),d&&d(!1),a)}subscribe(t){this.subscriber=t}cancel(){this.controller.abort(),this.pendingKeys.forEach((r,n)=>this.pendingKeys.delete(n));let t=this.subscriber;t&&t(!0)}async resolveData(t){let r=!1;if(!this.done){let n=()=>this.cancel();t.addEventListener("abort",n),r=await new Promise(a=>{this.subscribe(d=>{t.removeEventListener("abort",n),(d||this.done)&&a(d)})})}return r}get done(){return this.pendingKeys.size===0}get unwrappedData(){return S(this.data!==null&&this.done,"Can only unwrap data on initialized and settled deferreds"),Object.entries(this.data).reduce((t,r)=>{let[n,a]=r;return Object.assign(t,{[n]:Gt(a)})},{})}}function Yt(e){return e instanceof Promise&&e._tracked===!0}function Gt(e){if(!Yt(e))return e;if(e._error)throw e._error;return e._data}class Ae{constructor(t,r,n,a){a===void 0&&(a=!1),this.status=t,this.statusText=r||"",this.internal=a,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}}function qt(e){return e instanceof Ae}const Ze=["post","put","patch","delete"],Jt=new Set(Ze),Qt=["get",...Ze],Xt=new Set(Qt),Zt=new Set([301,302,303,307,308]),kt=new Set([307,308]),Ee={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},er={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},tr=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",rr=!tr;function fr(e){S(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let t=Je(e.routes),r=null,n=new Set,a=null,d=null,s=null,f=!1,m=ge(t,e.history.location,e.basename),u=null;if(m==null){let o=G(404,{pathname:e.history.location.pathname}),{matches:l,route:c}=ze(t);m=l,u={[c.id]:o}}let h=!m.some(o=>o.route.loader)||e.hydrationData!=null,w,i={historyAction:e.history.action,location:e.history.location,matches:m,initialized:h,navigation:Ee,restoreScrollPosition:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||u,fetchers:new Map},g=U.Pop,R=!1,D,x=!1,T=!1,I=[],B=[],L=new Map,K=0,ye=-1,ne=new Map,ue=new Set,Q=new Map,z=new Map;function it(){return r=e.history.listen(o=>{let{action:l,location:c}=o;return V(l,c)}),i.initialized||V(U.Pop,i.location),w}function ot(){r&&r(),n.clear(),D&&D.abort(),i.fetchers.forEach((o,l)=>be(l))}function lt(o){return n.add(o),()=>n.delete(o)}function _(o){i=C({},i,o),n.forEach(l=>l(i))}function ae(o,l){var c;let p=i.actionData!=null&&i.navigation.formMethod!=null&&i.navigation.state==="loading"&&((c=i.navigation.formAction)==null?void 0:c.split("?")[0])===o.pathname,y=l.loaderData?{loaderData:Me(i.loaderData,l.loaderData,l.matches||[])}:{};_(C({},p?{}:{actionData:null},l,y,{historyAction:g,location:o,initialized:!0,navigation:Ee,revalidation:"idle",restoreScrollPosition:i.navigation.formData?!1:Ue(o,l.matches||i.matches),preventScrollReset:R})),x||g===U.Pop||(g===U.Push?e.history.push(o,o.state):g===U.Replace&&e.history.replace(o,o.state)),g=U.Pop,R=!1,x=!1,T=!1,I=[],B=[]}async function st(o,l){if(typeof o=="number"){e.history.go(o);return}let{path:c,submission:p,error:y}=$e(o,l),v=ce(i.location,c,l&&l.state);v=C({},v,e.history.encodeLocation(v));let b=(l&&l.replace)===!0||p!=null?U.Replace:U.Push,P=l&&"preventScrollReset"in l?l.preventScrollReset===!0:void 0;return await V(b,v,{submission:p,pendingError:y,preventScrollReset:P,replace:l&&l.replace})}function dt(){if(ve(),_({revalidation:"loading"}),i.navigation.state!=="submitting"){if(i.navigation.state==="idle"){V(i.historyAction,i.location,{startUninterruptedRevalidation:!0});return}V(g||i.historyAction,i.navigation.location,{overrideNavigation:i.navigation})}}async function V(o,l,c){D&&D.abort(),D=null,g=o,x=(c&&c.startUninterruptedRevalidation)===!0,yt(i.location,i.matches),R=(c&&c.preventScrollReset)===!0;let p=c&&c.overrideNavigation,y=ge(t,l,e.basename);if(!y){let F=G(404,{pathname:l.pathname}),{matches:X,route:$}=ze(t);Re(),ae(l,{matches:X,loaderData:{},errors:{[$.id]:F}});return}if(lr(i.location,l)){ae(l,{matches:y});return}D=new AbortController;let v=le(l,D.signal,c&&c.submission),b,P;if(c&&c.pendingError)P={[te(y).route.id]:c.pendingError};else if(c&&c.submission){let F=await ct(v,l,c.submission,y,{replace:c.replace});if(F.shortCircuited)return;b=F.pendingActionData,P=F.pendingActionError,p=C({state:"loading",location:l},c.submission),v=new Request(v.url,{signal:v.signal})}let{shortCircuited:M,loaderData:E,errors:A}=await ft(v,l,y,p,c&&c.submission,c&&c.replace,b,P);M||(D=null,ae(l,{matches:y,loaderData:E,errors:A}))}async function ct(o,l,c,p,y){ve();let v=C({state:"submitting",location:l},c);_({navigation:v});let b,P=qe(p,l);if(!P.route.action)b={type:j.error,error:G(405,{method:o.method,pathname:l.pathname,routeId:P.route.id})};else if(b=await oe("action",o,P,p,w.basename),o.signal.aborted)return{shortCircuited:!0};if(re(b))return await ie(i,b,y&&y.replace===!0),{shortCircuited:!0};if(de(b)){let M=te(p,P.route.id);return(y&&y.replace)!==!0&&(g=U.Push),{pendingActionError:{[M.route.id]:b.error}}}if(q(b))throw new Error("defer() is not supported in actions");return{pendingActionData:{[P.route.id]:b.data}}}async function ft(o,l,c,p,y,v,b,P){let M=p;M||(M={state:"loading",location:l,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0});let[E,A]=We(i,c,y,l,T,I,B,b,P,Q);if(Re(O=>!(c&&c.some(N=>N.route.id===O))||E&&E.some(N=>N.route.id===O)),E.length===0&&A.length===0)return ae(l,{matches:c,loaderData:Me(i.loaderData,{},c),errors:P||null,actionData:b||null}),{shortCircuited:!0};x||(A.forEach(O=>{let[N]=O,ee=i.fetchers.get(N),pe={state:"loading",data:ee&&ee.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};i.fetchers.set(N,pe)}),_(C({navigation:M,actionData:b||i.actionData||null},A.length>0?{fetchers:new Map(i.fetchers)}:{}))),ye=++K,A.forEach(O=>{let[N]=O;return L.set(N,D)});let{results:F,loaderResults:X,fetcherResults:$}=await Le(i.matches,c,E,A,o);if(o.signal.aborted)return{shortCircuited:!0};A.forEach(O=>{let[N]=O;return L.delete(N)});let Z=Ve(F);if(Z)return await ie(i,Z,v),{shortCircuited:!0};let{loaderData:De,errors:me}=Ke(i,c,E,X,P,A,$,z);z.forEach((O,N)=>{O.subscribe(ee=>{(ee||O.done)&&z.delete(N)})}),pt();let k=Te(ye);return C({loaderData:De,errors:me},k||A.length>0?{fetchers:new Map(i.fetchers)}:{})}function xe(o){return i.fetchers.get(o)||er}function ut(o,l,c,p){if(rr)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");L.has(o)&&he(o);let y=ge(t,c,e.basename);if(!y){we(o,l,G(404,{pathname:c}));return}let{path:v,submission:b}=$e(c,p,!0),P=qe(y,v);if(b){ht(o,l,v,P,y,b);return}Q.set(o,[v,P,y]),mt(o,l,v,P,y)}async function ht(o,l,c,p,y,v){if(ve(),Q.delete(o),!p.route.action){let W=G(405,{method:v.formMethod,pathname:c,routeId:l});we(o,l,W);return}let b=i.fetchers.get(o),P=C({state:"submitting"},v,{data:b&&b.data});i.fetchers.set(o,P),_({fetchers:new Map(i.fetchers)});let M=new AbortController,E=le(c,M.signal,v);L.set(o,M);let A=await oe("action",E,p,y,w.basename);if(E.signal.aborted){L.get(o)===M&&L.delete(o);return}if(re(A)){L.delete(o),ue.add(o);let W=C({state:"loading"},v,{data:void 0});return i.fetchers.set(o,W),_({fetchers:new Map(i.fetchers)}),ie(i,A)}if(de(A)){we(o,l,A.error);return}q(A)&&S(!1,"defer() is not supported in actions");let F=i.navigation.location||i.location,X=le(F,M.signal),$=i.navigation.state!=="idle"?ge(t,i.navigation.location,e.basename):i.matches;S($,"Didn't find any matches after fetcher action");let Z=++K;ne.set(o,Z);let De=C({state:"loading",data:A.data},v);i.fetchers.set(o,De);let[me,k]=We(i,$,v,F,T,I,B,{[p.route.id]:A.data},void 0,Q);k.filter(W=>{let[Y]=W;return Y!==o}).forEach(W=>{let[Y]=W,Oe=i.fetchers.get(Y),bt={state:"loading",data:Oe&&Oe.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};i.fetchers.set(Y,bt),L.set(Y,M)}),_({fetchers:new Map(i.fetchers)});let{results:O,loaderResults:N,fetcherResults:ee}=await Le(i.matches,$,me,k,X);if(M.signal.aborted)return;ne.delete(o),L.delete(o),k.forEach(W=>{let[Y]=W;return L.delete(Y)});let pe=Ve(O);if(pe)return ie(i,pe);let{loaderData:je,errors:Fe}=Ke(i,i.matches,me,N,void 0,k,ee,z),vt={state:"idle",data:A.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};i.fetchers.set(o,vt);let wt=Te(Z);i.navigation.state==="loading"&&Z>ye?(S(g,"Expected pending action"),D&&D.abort(),ae(i.navigation.location,{matches:$,loaderData:je,errors:Fe,fetchers:new Map(i.fetchers)})):(_(C({errors:Fe,loaderData:Me(i.loaderData,je,$)},wt?{fetchers:new Map(i.fetchers)}:{})),T=!1)}async function mt(o,l,c,p,y){let v=i.fetchers.get(o),b={state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,data:v&&v.data};i.fetchers.set(o,b),_({fetchers:new Map(i.fetchers)});let P=new AbortController,M=le(c,P.signal);L.set(o,P);let E=await oe("loader",M,p,y,w.basename);if(q(E)&&(E=await nt(E,M.signal,!0)||E),L.get(o)===P&&L.delete(o),M.signal.aborted)return;if(re(E)){await ie(i,E);return}if(de(E)){let F=te(i.matches,l);i.fetchers.delete(o),_({fetchers:new Map(i.fetchers),errors:{[F.route.id]:E.error}});return}S(!q(E),"Unhandled fetcher deferred data");let A={state:"idle",data:E.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};i.fetchers.set(o,A),_({fetchers:new Map(i.fetchers)})}async function ie(o,l,c){var p;l.revalidate&&(T=!0);let y=ce(o.location,l.location);if(S(y,"Expected a location on the redirect navigation"),typeof((p=window)==null?void 0:p.location)<"u"){let A=fe(l.location).origin;if(window.location.origin!==A){c?window.location.replace(l.location):window.location.assign(l.location);return}}D=null;let v=c===!0?U.Replace:U.Push,{formMethod:b,formAction:P,formEncType:M,formData:E}=o.navigation;kt.has(l.status)&&b&&rt(b)&&M&&E?await V(v,y,{submission:{formMethod:b,formAction:l.location,formEncType:M,formData:E}}):await V(v,y,{overrideNavigation:{state:"loading",location:y,formMethod:b||void 0,formAction:P||void 0,formEncType:M||void 0,formData:E||void 0}})}async function Le(o,l,c,p,y){let v=await Promise.all([...c.map(M=>oe("loader",y,M,l,w.basename)),...p.map(M=>{let[,E,A,F]=M;return oe("loader",le(E,y.signal),A,F,w.basename)})]),b=v.slice(0,c.length),P=v.slice(c.length);return await Promise.all([Ye(o,c,b,y.signal,!1,i.loaderData),Ye(o,p.map(M=>{let[,,E]=M;return E}),P,y.signal,!0)]),{results:v,loaderResults:b,fetcherResults:P}}function ve(){T=!0,I.push(...Re()),Q.forEach((o,l)=>{L.has(l)&&(B.push(l),he(l))})}function we(o,l,c){let p=te(i.matches,l);be(o),_({errors:{[p.route.id]:c},fetchers:new Map(i.fetchers)})}function be(o){L.has(o)&&he(o),Q.delete(o),ne.delete(o),ue.delete(o),i.fetchers.delete(o)}function he(o){let l=L.get(o);S(l,"Expected fetch controller: "+o),l.abort(),L.delete(o)}function Ce(o){for(let l of o){let p={state:"idle",data:xe(l).data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};i.fetchers.set(l,p)}}function pt(){let o=[];for(let l of ue){let c=i.fetchers.get(l);S(c,"Expected fetcher: "+l),c.state==="loading"&&(ue.delete(l),o.push(l))}Ce(o)}function Te(o){let l=[];for(let[c,p]of ne)if(p<o){let y=i.fetchers.get(c);S(y,"Expected fetcher: "+c),y.state==="loading"&&(he(c),ne.delete(c),l.push(c))}return Ce(l),l.length>0}function Re(o){let l=[];return z.forEach((c,p)=>{(!o||o(p))&&(c.cancel(),l.push(p),z.delete(p))}),l}function gt(o,l,c){if(a=o,s=l,d=c||(p=>p.key),!f&&i.navigation===Ee){f=!0;let p=Ue(i.location,i.matches);p!=null&&_({restoreScrollPosition:p})}return()=>{a=null,s=null,d=null}}function yt(o,l){if(a&&d&&s){let c=l.map(y=>Ge(y,i.loaderData)),p=d(o,c)||o.key;a[p]=s()}}function Ue(o,l){if(a&&d&&s){let c=l.map(v=>Ge(v,i.loaderData)),p=d(o,c)||o.key,y=a[p];if(typeof y=="number")return y}return null}return w={get basename(){return e.basename},get state(){return i},get routes(){return t},initialize:it,subscribe:lt,enableScrollRestoration:gt,navigate:st,fetch:ut,revalidate:dt,createHref:o=>e.history.createHref(o),encodeLocation:o=>e.history.encodeLocation(o),getFetcher:xe,deleteFetcher:be,dispose:ot,_internalFetchControllers:L,_internalActiveDeferreds:z},w}function nr(e){return e!=null&&"formData"in e}function $e(e,t,r){r===void 0&&(r=!1);let n=typeof e=="string"?e:H(e);if(!t||!nr(t))return{path:n};if(t.formMethod&&!dr(t.formMethod))return{path:n,error:G(405,{method:t.formMethod})};if(t.formMethod&&rt(t.formMethod))return{path:n,submission:{formMethod:t.formMethod,formAction:tt(n),formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:t.formData}};let a=J(n);try{let d=et(t.formData);r&&a.search&&at(a.search)&&d.append("index",""),a.search="?"+d}catch{return{path:n,error:G(400)}}return{path:H(a)}}function ar(e,t){let r=e;if(t){let n=e.findIndex(a=>a.route.id===t);n>=0&&(r=e.slice(0,n))}return r}function We(e,t,r,n,a,d,s,f,m,u){let h=m?Object.values(m)[0]:f?Object.values(f)[0]:null,w=m?Object.keys(m)[0]:void 0,g=ar(t,w).filter((D,x)=>D.route.loader!=null&&(ir(e.loaderData,e.matches[x],D)||d.some(T=>T===D.route.id)||He(e.location,e.matches[x],r,n,D,a,h))),R=[];return u&&u.forEach((D,x)=>{let[T,I,B]=D;s.includes(x)?R.push([x,T,I,B]):a&&He(T,I,r,T,I,a,h)&&R.push([x,T,I,B])}),[g,R]}function ir(e,t,r){let n=!t||r.route.id!==t.route.id,a=e[r.route.id]===void 0;return n||a}function ke(e,t){let r=e.route.path;return e.pathname!==t.pathname||r&&r.endsWith("*")&&e.params["*"]!==t.params["*"]}function He(e,t,r,n,a,d,s){let f=fe(e),m=t.params,u=fe(n),h=a.params,w=ke(t,a)||f.toString()===u.toString()||f.search!==u.search||d;if(a.route.shouldRevalidate){let i=a.route.shouldRevalidate(C({currentUrl:f,currentParams:m,nextUrl:u,nextParams:h},r,{actionResult:s,defaultShouldRevalidate:w}));if(typeof i=="boolean")return i}return w}async function oe(e,t,r,n,a,d,s,f){a===void 0&&(a="/"),d===void 0&&(d=!1),s===void 0&&(s=!1);let m,u,h,w=new Promise((g,R)=>h=R),i=()=>h();t.signal.addEventListener("abort",i);try{let g=r.route[e];S(g,"Could not find the "+e+' to run on the "'+r.route.id+'" route'),u=await Promise.race([g({request:t,params:r.params,context:f}),w]),S(u!==void 0,"You defined "+(e==="action"?"an action":"a loader")+" for route "+('"'+r.route.id+"\" but didn't return anything from your `"+e+"` ")+"function. Please return a value or `null`.")}catch(g){m=j.error,u=g}finally{t.signal.removeEventListener("abort",i)}if(sr(u)){let g=u.status;if(Zt.has(g)){let x=u.headers.get("Location");if(S(x,"Redirects returned/thrown from loaders/actions must have a Location header"),!(/^[a-z+]+:\/\//i.test(x)||x.startsWith("//"))){let I=n.slice(0,n.indexOf(r)+1),B=Xe(I).map(K=>K.pathnameBase),L=Wt(x,B,new URL(t.url).pathname);if(S(H(L),"Unable to resolve redirect location: "+x),a){let K=L.pathname;L.pathname=K==="/"?a:se([a,K])}x=H(L)}if(d)throw u.headers.set("Location",x),u;return{type:j.redirect,status:g,location:x,revalidate:u.headers.get("X-Remix-Revalidate")!==null}}if(s)throw{type:m||j.data,response:u};let R,D=u.headers.get("Content-Type");return D&&D.startsWith("application/json")?R=await u.json():R=await u.text(),m===j.error?{type:m,error:new Ae(g,u.statusText,R),headers:u.headers}:{type:j.data,data:R,statusCode:u.status,headers:u.headers}}return m===j.error?{type:m,error:u}:u instanceof Vt?{type:j.deferred,deferredData:u}:{type:j.data,data:u}}function le(e,t,r){let n=fe(tt(e)).toString(),a={signal:t};if(r){let{formMethod:d,formEncType:s,formData:f}=r;a.method=d.toUpperCase(),a.body=s==="application/x-www-form-urlencoded"?et(f):f}return new Request(n,a)}function et(e){let t=new URLSearchParams;for(let[r,n]of e.entries())S(typeof n=="string",'File inputs are not supported with encType "application/x-www-form-urlencoded", please use "multipart/form-data" instead.'),t.append(r,n);return t}function or(e,t,r,n,a){let d={},s=null,f,m=!1,u={};return r.forEach((h,w)=>{let i=t[w].route.id;if(S(!re(h),"Cannot handle redirect results in processLoaderData"),de(h)){let g=te(e,i),R=h.error;n&&(R=Object.values(n)[0],n=void 0),s=Object.assign(s||{},{[g.route.id]:R}),m||(m=!0,f=qt(h.error)?h.error.status:500),h.headers&&(u[i]=h.headers)}else q(h)?(a&&a.set(i,h.deferredData),d[i]=h.deferredData.data):(d[i]=h.data,h.statusCode!=null&&h.statusCode!==200&&!m&&(f=h.statusCode),h.headers&&(u[i]=h.headers))}),n&&(s=n),{loaderData:d,errors:s,statusCode:f||200,loaderHeaders:u}}function Ke(e,t,r,n,a,d,s,f){let{loaderData:m,errors:u}=or(t,r,n,a,f);for(let h=0;h<d.length;h++){let[w,,i]=d[h];S(s!==void 0&&s[h]!==void 0,"Did not find corresponding fetcher result");let g=s[h];if(de(g)){let R=te(e.matches,i.route.id);u&&u[R.route.id]||(u=C({},u,{[R.route.id]:g.error})),e.fetchers.delete(w)}else{if(re(g))throw new Error("Unhandled fetcher revalidation redirect");if(q(g))throw new Error("Unhandled fetcher deferred data");{let R={state:"idle",data:g.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0};e.fetchers.set(w,R)}}}return{loaderData:m,errors:u}}function Me(e,t,r){let n=C({},t);return r.forEach(a=>{let d=a.route.id;t[d]===void 0&&e[d]!==void 0&&(n[d]=e[d])}),n}function te(e,t){return(t?e.slice(0,e.findIndex(n=>n.route.id===t)+1):[...e]).reverse().find(n=>n.route.hasErrorBoundary===!0)||e[0]}function ze(e){let t=e.find(r=>r.index||!r.path||r.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function G(e,t){let{pathname:r,routeId:n,method:a}=t===void 0?{}:t,d="Unknown Server Error",s="Unknown @remix-run/router error";return e===400?(d="Bad Request",a&&r&&n?s="You made a "+a+' request to "'+r+'" but '+('did not provide a `loader` for route "'+n+'", ')+"so there is no way to handle the request.":s="Cannot submit binary form data using GET"):e===403?(d="Forbidden",s='Route "'+n+'" does not match URL "'+r+'"'):e===404?(d="Not Found",s='No route matches URL "'+r+'"'):e===405&&(d="Method Not Allowed",a&&r&&n?s="You made a "+a.toUpperCase()+' request to "'+r+'" but '+('did not provide an `action` for route "'+n+'", ')+"so there is no way to handle the request.":a&&(s='Invalid request method "'+a.toUpperCase()+'"')),new Ae(e||500,d,new Error(s),!0)}function Ve(e){for(let t=e.length-1;t>=0;t--){let r=e[t];if(re(r))return r}}function tt(e){let t=typeof e=="string"?J(e):e;return H(C({},t,{hash:""}))}function lr(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash!==t.hash}function q(e){return e.type===j.deferred}function de(e){return e.type===j.error}function re(e){return(e&&e.type)===j.redirect}function sr(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function dr(e){return Xt.has(e)}function rt(e){return Jt.has(e)}async function Ye(e,t,r,n,a,d){for(let s=0;s<r.length;s++){let f=r[s],m=t[s],u=e.find(w=>w.route.id===m.route.id),h=u!=null&&!ke(u,m)&&(d&&d[m.route.id])!==void 0;q(f)&&(a||h)&&await nt(f,n,a).then(w=>{w&&(r[s]=w||r[s])})}}async function nt(e,t,r){if(r===void 0&&(r=!1),!await e.deferredData.resolveData(t)){if(r)try{return{type:j.data,data:e.deferredData.unwrappedData}}catch(a){return{type:j.error,error:a}}return{type:j.data,data:e.deferredData.data}}}function at(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function Ge(e,t){let{route:r,pathname:n,params:a}=e;return{id:r.id,pathname:n,params:a,data:t[r.id],handle:r.handle}}function qe(e,t){let r=typeof t=="string"?J(t).search:t.search;if(e[e.length-1].route.index&&at(r||""))return e[e.length-1];let n=Xe(e);return n[n.length-1]}export{U as A,Ae as E,qt as a,cr as b,fr as c,H as d,Xe as g,S as i,se as j,ge as m,J as p,Wt as r,It as s,Se as w};
